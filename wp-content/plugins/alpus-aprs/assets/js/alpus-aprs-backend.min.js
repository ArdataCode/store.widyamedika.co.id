!function(a){a(document).ready((function(){a("body").on("click",".alpus-aprs-clear-all .alpus-plugin-action-button",(function(s){var l=a(this);l.append('<span class="alpus-aprs-loading small"><i></i></span>').addClass("loading"),a.ajax({type:"post",data:{action:"alpus_aprs_clear_cache"},url:alpus_aprs_backend_vars.ajax_url,success:function(a){a.success&&l.removeClass("loading").find("span").remove()}}),s.preventDefault()})),a("body").on("click",".alpus-aprs-generate-all .alpus-plugin-action-button:not(.disabled)",(function(s){a(this);a.ajax({type:"post",data:{action:"alpus_aprs_generate_all"},url:alpus_aprs_backend_vars.ajax_url,success:function(a){location.reload()}}),s.preventDefault()})),a(".alpus-aprs-generate-all .alpus-plugin-action-button").length>0&&a.ajax({type:"post",data:{action:"alpus_aprs_is_generating"},url:alpus_aprs_backend_vars.ajax_url,success:function(s){if("false"!==s.data){a(".alpus-aprs-generate-all .alpus-plugin-action-button").html("Running - "+s.data+" Products Generated.").addClass("disabled")}}}),a("#alpus_aprs_text_model").parent().append('<span id="alpus-aprs-model-update">update</span>'),a("body").on("click","#alpus-aprs-model-update",(function(s){var l=a(this).parent(),t=l.find("#alpus_aprs_text_model"),p=a("#alpus_aprs_api_key").val();l.css("opacity",".3"),a.ajax({type:"post",data:{action:"alpus_aprs_update_models",key:p},url:alpus_aprs_backend_vars.ajax_url,success:function(a){if(console.log(a),a.data){var s=t.val();t.html(""),Object.entries(a.data).forEach((([a,s])=>{t.append('<option value="'+a+'">'+s+"</option>")})),null!=s?t.val(s):t.val("gpt-3.5-turbo-16k"),l.css("opacity","")}}}),s.preventDefault()}));var s=a("#alpus_aprs_api_key").val();a("#alpus_aprs_api_key").on("change",(function(l){var t=a(this).val(),p=a("#alpus-aprs-model-update").parent(),e=p.find("#alpus_aprs_text_model");t!==s&&51==t.length&&(p.css("opacity",".3"),s=t,a.ajax({type:"post",data:{action:"alpus_aprs_update_models",key:t},url:alpus_aprs_backend_vars.ajax_url,success:function(a){if(console.log(a),a.data){var s=e.val();e.html(""),Object.entries(a.data).forEach((([a,s])=>{e.append('<option value="'+a+'">'+s+"</option>")})),null!=s?e.val(s):e.val("gpt-3.5-turbo-16k"),p.css("opacity","")}p.css("opacity","")}}))}))}))}(jQuery);